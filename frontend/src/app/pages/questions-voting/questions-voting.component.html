<app-header></app-header>
<section class="container mx-auto py-4">
  <div class="w-full py-4 px-4">
    @if(questions.length) {
      <div class="grid grid-cols-12 gap-2">
        @for(question of questions; track question._id) {
          <div class="col-span-4 bg-rose-50 p-4 rounded-xl h-86" [ngClass]="{ 'opacity-75': !checkIsFinished(question.sessionStartedDate) }">
            <a [routerLink]="['/question', question._id]">
              <div class="grid grid-cols-12 gap-2">
                <div class="col-span-8">
                  <h1 class="text-rose-400 font-black text-lg w-full">{{ reduceText(question.name) }}</h1>
                  <span class="text-gray-950 w-full">{{ reduceText(question.description) }}</span>
                  <div class="text-rose-50 font-black text-sm flex items-center rounded-md">
                    @if(question.sessionStartedDate) {
                      <div class="px-4 py-2 mt-6 text-gray-50 font-black text-sm bg-lime-400/75 flex items-center rounded-md">
                        <div class="text-xs">
                          Iniciada
                        </div>
                      </div>
                    } @else {
                      <div class="px-4 py-2 mt-6 text-rose-50 font-black text-sm bg-rose-400/75 flex items-center rounded-md">
                        <div class="text-xs">
                          Não Iniciada
                        </div>
                      </div>
                    }
                  </div>
                </div>
                <div class="col-span-4 mt-4 flex justify-center">
                  @if(checkVoted(question._id)) {
                    <span class="text-lime-400 text-sm font-bold">
                      <fa-icon [icon]="checkIcon"></fa-icon> Votou
                    </span>
                  } @else {
                    <span class="text-rose-400 text-sm font-bold">
                      <fa-icon [icon]="xIcon"></fa-icon> Não votou
                    </span>
                  }
                </div>
                <div class="col-span-12 mt-10">
                  <div class="grid grid-cols-12">
                    <div class="col-span-12 bg-rose-400/85 py-2 px-4 rounded-lg shadow-gray-300 shadow-md">
                      <h3 class="text-rose-50 text-sm font-bold">Encerramento</h3>
                      <span class="text-sm text-rose-50 w-full">{{ formatDateBrLocale(question.sessionStartedDate) }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </a>
          </div>
        }
      </div>
    } @else {
      <section class="p-6 bg-rose-400 text-rose-50 px-16 py-8 rounded-xl">
        <div class="grid grid-cols-12 flex items-center">
          <div class="col-span-1">
            <fa-icon [icon]="sadTearIcon" size="3x"></fa-icon>
          </div>
          <div class="col-span-11">
            <h1 class="font-black text-2xl">
              Nenhuma votação iniciada.
            </h1>
            <span>
              No momento não há nenhuma votação iniciada. Assim que tivermos votações disponíveis você verá aqui.
              Você pode criar uma pauta e iníciá-la para que outras pessoas possam votar.
            </span>
          </div>
        </div>
      </section>
    }

    <div class="w-full py-16">
      <div class="flex justify-end">
        <button class="text-rose-400 disabled:text-rose-400/50 disabled:cursor-not-allowed text-sm px-2" (click)="goToPage(1)" [disabled]="currentPage === 1">Primeira</button>
        <button class="text-rose-400 disabled:text-rose-400/50 disabled:cursor-not-allowed text-sm px-2" (click)="prevPage()" [disabled]="currentPage === 1">Anterior</button>
        @for(page of pages; track page) {
          <button class="text-rose-400 disabled:text-rose-400/50 active:text-rose-50 text-sm px-2" [class.active]="currentPage === page" (click)="goToPage(page)">{{ page }}</button>
        }
        <button class="text-rose-400 disabled:text-rose-400/50 disabled:cursor-not-allowed text-sm px-2" (click)="nextPage()" [disabled]="currentPage === totalPages">Próxima</button>
        <button class="text-rose-400 disabled:text-rose-400/50 disabled:cursor-not-allowed text-sm px-2" (click)="goToPage(totalPages)" [disabled]="currentPage === totalPages">Última</button>
      </div>
    </div>

    <section class="grid grid-cols-12 py-8 mt-24 gap-2 flex items-center">
        <div class="col-span-10 py-4">
          <h1 class="text-2xl text-rose-400 font-black">
            Suas Pautas
          </h1>
          <div class="w-10 h-0.5 my-2 bg-rose-50"></div>
        </div>
        <div class="col-span-2 flex justify-end">
          <button (click)="navigateToCreateQuestion()" class="text-rose-50 bg-rose-400 h-12 w-12 rounded-3xl flex justify-center items-center cursor-pointer">
            <fa-icon [icon]="pluIcon" size="xl"></fa-icon>
          </button>
        </div>
      @for(question of creatorQuestions; track question._id) {
        <div class="col-span-3 bg-rose-50 p-6 rounded-xl h-64">
          <a [routerLink]="['/question', question._id]">
            <h1 class="text-rose-400 font-black text-lg w-full">{{ reduceText(question.name) }}</h1>
            <span class="text-sm text-gray-950 w-full">{{ reduceText(question.description) }}</span>
            <div class="text-rose-50 font-black text-sm flex items-center rounded-md">
              @if(question.sessionStartedDate) {
                <div class="px-4 py-2 mt-6 text-gray-50 font-black text-sm bg-lime-400/75 flex items-center rounded-md">
                  <div class="text-xs">
                    Iniciada
                  </div>
                </div>
              } @else {
                <div class="px-4 py-2 mt-6 text-rose-50 font-black text-sm bg-rose-400/75 flex items-center rounded-md">
                  <div class="text-xs">
                    Não Iniciada
                  </div>
                </div>
              }
            </div>
          </a>
        </div>
      }
    </section>
  </div>
</section>
